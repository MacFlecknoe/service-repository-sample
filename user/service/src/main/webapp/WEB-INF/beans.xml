<?xml version="1.0" encoding="UTF-8"?>
<beans 
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jaxws="http://cxf.apache.org/jaxws" 
	xmlns:cxf="http://cxf.apache.org/core"
	xmlns:p="http://cxf.apache.org/policy"
	xmlns:userService="urn:healthmedia:wsdl:user:soap:v1"
	xmlns:wsp="http://www.w3.org/ns/ws-policy" 
	xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd 
		http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
		http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
		http://cxf.apache.org/policy http://cxf.apache.org/schemas/policy.xsd
		http://www.w3.org/ns/ws-policy http://www.w3.org/2007/02/ws-policy.xsd">

	<import resource="classpath:META-INF/cxf/cxf.xml" />
	<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
	
	<jaxws:endpoint id="userService"
		implementor="com.healthmedia.ws.wsdl.user.v1.UserServiceImpl" address="/userService">
		<jaxws:properties>
			<entry key="ws-security.ut.validator" value-ref="validator" />
		</jaxws:properties>
	</jaxws:endpoint>
	
	<p:externalAttachment location="classpath:policy/authentication-policy.xml"/>
	<p:externalAttachment location="classpath:policy/i18n-policy.xml"/>
	
	<!-- looks up user from data store and validates the passed credentials -->
	<bean id="validator" class="com.healthmedia.ws.security.MockTokenValidator" />
	
	<cxf:bus>
		<cxf:features>
			<cxf:logging/>
			<p:policies />
		</cxf:features>
	</cxf:bus>
	
</beans>